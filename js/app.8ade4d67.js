(function(e){function t(t){for(var a,n,r=t[0],l=t[1],i=t[2],b=0,u=[];b<r.length;b++)n=r[b],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&u.push(c[n][0]),c[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(u.length)u.shift()();return o.push.apply(o,i||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],a=!0,r=1;r<s.length;r++){var l=s[r];0!==c[l]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},c={app:0},o=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var i=0;i<r.length;i++)t(r[i]);var d=l;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"08bd":function(e,t,s){"use strict";s("0a0f")},"0a0f":function(e,t,s){},"0c8f":function(e,t,s){},"1b84":function(e,t,s){"use strict";s("cd01")},"1b93":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("7a23");function c(e,t,s,c,o,n){const r=Object(a["D"])("NavBar"),l=Object(a["D"])("router-view");return Object(a["v"])(),Object(a["g"])(a["a"],null,[Object(a["j"])(r),Object(a["j"])(l)],64)}const o=e=>(Object(a["y"])("data-v-12dd5366"),e=e(),Object(a["w"])(),e),n={class:"navbar navbar-expand-lg navbar-dark bg-dark"},r={class:"container"},l=Object(a["i"])("King Of Bots"),i=o(()=>Object(a["h"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(a["h"])("span",{class:"navbar-toggler-icon"})],-1)),d={class:"collapse navbar-collapse",id:"navbarText"},b={class:"navbar-nav me-auto mb-2 mb-lg-0"},u={class:"nav-item"},p=Object(a["i"])(" 对战 "),h={class:"nav-item"},j=Object(a["i"])("对局列表"),O={class:"nav-item"},m=Object(a["i"])("排行榜"),g={key:0,class:"navbar-nav"},v={class:"nav-item dropdown"},_={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},f={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},y=Object(a["i"])("我的Bot"),k=o(()=>Object(a["h"])("li",null,[Object(a["h"])("hr",{class:"dropdown-divider"})],-1)),w={key:1,class:"navbar-nav"},x={class:"nav-item"},A=Object(a["i"])(" 登录 "),I={class:"nav-item"},z=Object(a["i"])(" 注册 ");function S(e,t,s,c,o,S){const B=Object(a["D"])("router-link");return Object(a["v"])(),Object(a["g"])("nav",n,[Object(a["h"])("div",r,[Object(a["j"])(B,{class:"navabar-brand",to:{name:"home"}},{default:Object(a["K"])(()=>[l]),_:1}),i,Object(a["h"])("div",d,[Object(a["h"])("ul",b,[Object(a["h"])("li",u,[Object(a["j"])(B,{class:Object(a["q"])("pk_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"pk_index"}},{default:Object(a["K"])(()=>[p]),_:1},8,["class"])]),Object(a["h"])("li",h,[Object(a["j"])(B,{class:Object(a["q"])("record_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"record_index"}},{default:Object(a["K"])(()=>[j]),_:1},8,["class"])]),Object(a["h"])("li",O,[Object(a["j"])(B,{class:Object(a["q"])("ranklist_index"==c.route_name?"nav-link active":"nav-link"),to:{name:"ranklist_index"}},{default:Object(a["K"])(()=>[m]),_:1},8,["class"])])]),e.$store.state.user.is_login?(Object(a["v"])(),Object(a["g"])("ul",g,[Object(a["h"])("li",v,[Object(a["h"])("a",_,Object(a["F"])(e.$store.state.user.username),1),Object(a["h"])("ul",f,[Object(a["j"])(B,{class:"dropdown-item",to:{name:"user_bot_index"}},{default:Object(a["K"])(()=>[y]),_:1}),k,Object(a["h"])("li",null,[Object(a["h"])("a",{class:"dropdown-item",href:"#",onClick:t[0]||(t[0]=(...e)=>c.logout&&c.logout(...e))},"退出")])])])])):e.$store.state.user.pulling_info?Object(a["f"])("",!0):(Object(a["v"])(),Object(a["g"])("ul",w,[Object(a["h"])("li",x,[Object(a["j"])(B,{class:"nav-link",to:{name:"user_account_login"},role:"button"},{default:Object(a["K"])(()=>[A]),_:1})]),Object(a["h"])("li",I,[Object(a["j"])(B,{class:"nav-link",to:{name:"user_account_register"},role:"button"},{default:Object(a["K"])(()=>[z]),_:1})])]))])])])}var B=s("6605"),C=s("5502"),L={setup(){const e=Object(C["b"])(),t=Object(B["c"])();let s=Object(a["c"])(()=>t.name);const c=()=>{e.dispatch("logout")};return{route_name:s,logout:c}}},P=(s("d675"),s("6b0d")),F=s.n(P);const M=F()(L,[["render",S],["__scopeId","data-v-12dd5366"]]);var $=M,D=(s("ab8b"),s("4989")),T={components:{NavBar:$}};s("08bd");const q=F()(T,[["render",c]]);var G=q;const U={key:3,class:"user-color"},V={key:4,class:"user-color1"};function K(e,t,s,c,o,n){const r=Object(a["D"])("PlayGround"),l=Object(a["D"])("MatchGround"),i=Object(a["D"])("ResultBorad");return Object(a["v"])(),Object(a["g"])(a["a"],null,["playing"===e.$store.state.pk.status?(Object(a["v"])(),Object(a["e"])(r,{key:0})):Object(a["f"])("",!0),"matching"===e.$store.state.pk.status?(Object(a["v"])(),Object(a["e"])(l,{key:1})):Object(a["f"])("",!0),"none"!=e.$store.state.pk.loser?(Object(a["v"])(),Object(a["e"])(i,{key:2})):Object(a["f"])("",!0),"playing"===e.$store.state.pk.status&&parseInt(e.$store.state.user.id)===parseInt(e.$store.state.pk.a_id)?(Object(a["v"])(),Object(a["g"])("div",U,"蓝方")):Object(a["f"])("",!0),"playing"===e.$store.state.pk.status&&parseInt(e.$store.state.user.id)===parseInt(e.$store.state.pk.b_id)?(Object(a["v"])(),Object(a["g"])("div",V,"红方")):Object(a["f"])("",!0)],64)}const E=e=>(Object(a["y"])("data-v-709b58b9"),e=e(),Object(a["w"])(),e),R={class:"matchground"},N={class:"row"},J={class:"col-4"},W={class:"user-photo"},H=["src"],Q={class:"user-username"},X={class:"col-4"},Y={class:"user-select-bot"},Z=E(()=>Object(a["h"])("option",{value:"-1",selected:""},"亲自出马",-1)),ee=["value"],te={class:"col-4"},se={class:"user-photo"},ae=["src"],ce={class:"user-username"},oe={class:"col-12",style:{"text-align":"center","padding-top":"15vh"}};function ne(e,t,s,c,o,n){return Object(a["v"])(),Object(a["g"])("div",R,[Object(a["h"])("div",N,[Object(a["h"])("div",J,[Object(a["h"])("div",W,[Object(a["h"])("img",{src:e.$store.state.user.photo,alt:""},null,8,H)]),Object(a["h"])("div",Q,Object(a["F"])(e.$store.state.user.username),1)]),Object(a["h"])("div",X,[Object(a["h"])("div",Y,[Object(a["L"])(Object(a["h"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.select_bot=e),class:"form-select","aria-label":"Default select example"},[Z,(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.bots,e=>(Object(a["v"])(),Object(a["g"])("option",{key:e.id,value:e.id},Object(a["F"])(e.title),9,ee))),128))],512),[[a["H"],c.select_bot]])])]),Object(a["h"])("div",te,[Object(a["h"])("div",se,[Object(a["h"])("img",{src:e.$store.state.pk.opponent_photo,alt:""},null,8,ae)]),Object(a["h"])("div",ce,Object(a["F"])(e.$store.state.pk.opponent_username),1)]),Object(a["h"])("div",oe,[Object(a["h"])("button",{onClick:t[1]||(t[1]=(...e)=>c.click_match_btn&&c.click_match_btn(...e)),type:"button",class:"btn btn-primary btn-lg"},Object(a["F"])(c.match_btn_info),1)])])])}var re=s("1157"),le=s.n(re),ie={state:{id:"",username:"",photo:"",token:"",is_login:!1,pulling_info:!0},getters:{},mutations:{updateUser(e,t){e.id=t.id,e.username=t.username,e.photo=t.photo,e.is_login=t.is_login},updateToken(e,t){e.token=t},logout(e){e.id="",e.username="",e.photo="",e.token="",e.is_login=!1},updataPullinginfo(e,t){e.pulling_info=t},updatePhoto(e,t){e.photo=t}},actions:{login(e,t){le.a.ajax({url:"https://snake.zinzin.cc/api/user/account/token/",type:"post",data:{username:t.username,password:t.password},success(s){"success"===s.error_message?(localStorage.setItem("jwt_token",s.token),e.commit("updateToken",s.token),t.success(s)):(t.error(s),console.log("shibai"))},error(e){console.log("shibai"),t.error(e)}})},getinfo(e,t){le.a.ajax({url:"https://snake.zinzin.cc/api/user/account/info/",type:"get",headers:{Authorization:"Bearer "+e.state.token},success(s){"success"===s.error_message?(e.commit("updateUser",{...s,is_login:!0}),t.success(s)):t.error(s)},error(e){t.error(e)}})},logout(e){localStorage.removeItem("jwt_token"),e.commit("logout")}},modules:{}},de={state:{status:"matching",socket:null,opponent_username:"",opponent_photo:"",gamemap:null,a_id:0,a_sx:0,a_sy:0,b_id:0,b_sx:0,b_sy:0,gameObject:null,loser:"none"},getters:{},mutations:{updateSocket(e,t){e.socket=t},updateOpponent(e,t){e.opponent_username=t.username,e.opponent_photo=t.photo},updateStatus(e,t){e.status=t},updateGamemap(e,t){e.gamemap=t.map,e.a_id=t.a_id,e.a_sx=t.a_sx,e.a_sy=t.a_sy,e.b_id=t.b_id,e.b_sx=t.b_sx,e.b_sy=t.b_sy},updateGameObject(e,t){e.gameObject=t},updateLoser(e,t){e.loser=t}},actions:{},modules:{}},be={state:{is_record:!1,a_steps:"",b_steps:"",record_loser:""},mutations:{updateIsRecord(e,t){e.is_record=t},updateSteps(e,t){e.a_steps=t.a_steps,e.b_steps=t.b_steps},updateRecordLoser(e,t){e.record_loser=t}},actions:{},modules:{}},ue=Object(C["a"])({state:{},mutations:{},actions:{},modules:{user:ie,pk:de,record:be}}),pe={setup(){let e=Object(a["A"])("开始匹配"),t=Object(a["A"])([]),s=Object(a["A"])("-1");const c=()=>{"开始匹配"===e.value?(e.value="取消",ue.state.pk.socket.send(JSON.stringify({event:"start-matching",bot_id:s.value}))):(e.value="开始匹配",ue.state.pk.socket.send(JSON.stringify({event:"stop-matching"})))},o=()=>{le.a.ajax({url:"https://snake.zinzin.cc/api/user/bot/getlist/",type:"GET",headers:{Authorization:"Bearer "+ue.state.user.token},success(e){t.value=e}})};return o(),{match_btn_info:e,click_match_btn:c,bots:t,select_bot:s}}};s("b594");const he=F()(pe,[["render",ne],["__scopeId","data-v-709b58b9"]]);var je=he;const Oe={class:"playground"};function me(e,t,s,c,o,n){const r=Object(a["D"])("GameMap");return Object(a["v"])(),Object(a["g"])("div",Oe,[Object(a["j"])(r)])}const ge={ref:"parent",class:"gamemap"},ve={ref:"canvas",tabindex:"0"};function _e(e,t,s,c,o,n){return Object(a["v"])(),Object(a["g"])("div",ge,[Object(a["h"])("canvas",ve,null,512)],512)}const fe=[];class ye{constructor(){fe.push(this),this.timedelta=0,this.has_called_start=!1}start(){}update(){}on_destroy(){}destroy(){this.on_destroy();for(let e in fe){const t=fe[e];if(t===this){fe.splice(e);break}}}}let ke;const we=e=>{for(let t of fe)t.has_called_start?(t.timedelta=e-ke,t.update()):(t.has_called_start=!0,t.start());ke=e,requestAnimationFrame(we)};requestAnimationFrame(we);class xe{constructor(e,t){this.r=e,this.c=t,this.x=t+.5,this.y=e+.5}}class Ae extends ye{constructor(e,t){super(),this.id=e.id,this.color=e.color,this.gamemap=t,this.cells=[new xe(e.r,e.c)],this.next_cell=null,this.speed=5,this.direction=-1,this.status="idle",this.dr=[-1,0,1,0],this.dc=[0,1,0,-1],this.step=0,this.eps=.01,this.eye_direction=0,1===this.id&&(this.eye_direction=2),this.eye_dx=[[-1,1],[1,1],[1,-1],[-1,-1]],this.eye_dy=[[-1,-1],[-1,1],[1,1],[1,-1]]}set_direction(e){this.direction=e}start(){}update_move(){const e=this.next_cell.x-this.cells[0].x,t=this.next_cell.y-this.cells[0].y,s=Math.sqrt(e*e+t*t);if(s<this.eps)this.cells[0]=this.next_cell,this.next_cell=null,this.status="idle",this.check_tail_increasing()||this.cells.pop();else{const a=this.speed*this.timedelta/1e3;if(this.cells[0].x+=a*e/s,this.cells[0].y+=a*t/s,!this.check_tail_increasing()){const e=this.cells.length,t=this.cells[e-1],c=this.cells[e-2],o=c.x-t.x,n=c.y-t.y;t.x+=a*o/s,t.y+=a*n/s}}}check_tail_increasing(){return this.step<=10||this.step%3===1}next_step(){const e=this.direction;this.next_cell=new xe(this.cells[0].r+this.dr[e],this.cells[0].c+this.dc[e]),this.direction=-1,this.eye_direction=e,this.status="move",this.step++;const t=this.cells.length;for(let s=t;s>0;s--)this.cells[s]=JSON.parse(JSON.stringify(this.cells[s-1]))}update(){"move"===this.status&&this.update_move(),this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,"die"===this.status&&(t.fillStyle="white");for(const s of this.cells)t.beginPath(),t.arc(s.x*e,s.y*e,e/2*.8,0,2*Math.PI),t.fill();for(let s=1;s<this.cells.length;s++){const a=this.cells[s-1],c=this.cells[s];Math.abs(a.x-c.x)<this.eps&&Math.abs(a.y-c.y)<this.eps||(Math.abs(a.x-c.x)<this.eps?t.fillRect((a.x-.4)*e,Math.min(a.y,c.y)*e,.8*e,Math.abs(a.y-c.y)*e):t.fillRect(Math.min(a.x,c.x)*e,(a.y-.4)*e,Math.abs(a.x-c.x)*e,.8*e))}t.fillStyle="black";for(let s=0;s<2;s++){const a=(this.cells[0].x+.15*this.eye_dx[this.eye_direction][s])*e,c=(this.cells[0].y+.15*this.eye_dy[this.eye_direction][s])*e;t.beginPath(),t.arc(a,c,.05*e,0,2*Math.PI),t.fill()}}}class Ie extends ye{constructor(e,t,s){super(),this.r=e,this.c=t,this.gamemap=s,this.color="#B37226"}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.fillRect(this.c*e,this.r*e,e,e)}}class ze extends ye{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.L=0,this.store=s,this.rows=13,this.cols=14,this.inner_walls_count=20,this.walls=[],this.snakes=[new Ae({id:0,color:"#4876EC",r:this.rows-2,c:1},this),new Ae({id:1,color:"#F94848",r:1,c:this.cols-2},this)]}create_walls(){const e=this.store.state.pk.gamemap;console.log(e);for(let t=0;t<this.rows;t++)for(let s=0;s<this.cols;s++)e[t][s]&&this.walls.push(new Ie(t,s,this))}add_listening_events(){if(this.store.state.record.is_record){let e=0;const[t,s]=this.snakes,a=this.store.state.record.a_steps,c=this.store.state.record.b_steps;console.log(this.store.state.record);const o=this.store.state.record.record_loser,n=setInterval(()=>{e>=a.length-1?("all"!==o&&"A"!==o||(t.status="die"),"all"!==o&&"B"!==o||(s.status="die"),clearInterval(n)):(t.set_direction(parseInt(a[e])),s.set_direction(parseInt(c[e]))),e++},300)}else this.ctx.canvas.focus(),this.ctx.canvas.addEventListener("keydown",e=>{let t=-1;"w"===e.key?t=0:"d"===e.key?t=1:"s"===e.key?t=2:"a"===e.key?t=3:"ArrowUp"===e.key?t=0:"ArrowRight"===e.key?t=1:"ArrowDown"===e.key?t=2:"ArrowLeft"===e.key&&(t=3),t>=0&&this.store.state.pk.socket.send(JSON.stringify({event:"move",direction:t}))})}start(){this.create_walls(),this.add_listening_events()}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}check_ready(){for(const e of this.snakes){if("idle"!==e.status)return!1;if(-1===e.direction)return!1}return!0}next_step(){for(const e of this.snakes)e.next_step()}check_valid(e){for(const t of this.walls)if(t.r===e.r&&t.c===e.c)return!1;for(const t of this.snakes){let s=t.cells.length;t.check_tail_increasing()||s--;for(let a=0;a<s;a++)if(t.cells[a].r===e.r&&t.cells[a].c===e.c)return!1}return!0}update(){this.update_size(),this.check_ready()&&this.next_step(),this.render()}render(){const e="#AAD751",t="#A2D149";for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++)this.ctx.fillStyle=(s+a)%2==0?e:t,this.ctx.fillRect(a*this.L,s*this.L,this.L,this.L)}}var Se={setup(){const e=Object(C["b"])();let t=Object(a["A"])(null),s=Object(a["A"])(null);return Object(a["t"])(()=>{e.commit("updateGameObject",new ze(s.value.getContext("2d"),t.value,e))}),{parent:t,canvas:s,store:e}}};s("d812");const Be=F()(Se,[["render",_e],["__scopeId","data-v-a27b2c3a"]]);var Ce=Be,Le={components:{GameMap:Ce}};s("5726");const Pe=F()(Le,[["render",me],["__scopeId","data-v-1a8e2930"]]);var Fe=Pe;const Me={class:"result-board"},$e={key:0,class:"result-board-text"},De={key:1,class:"result-board-text"},Te={key:2,class:"result-board-text"},qe={key:3,class:"result-board-text"},Ge={class:"result-board-btn"};function Ue(e,t,s,c,o,n){return Object(a["v"])(),Object(a["g"])("div",Me,["all"===e.$store.state.pk.loser?(Object(a["v"])(),Object(a["g"])("div",$e," Draw ")):"A"===e.$store.state.pk.loser&&e.$store.state.pk.a_id===parseInt(e.$store.state.user.id)?(Object(a["v"])(),Object(a["g"])("div",De," Lose ")):"B"===e.$store.state.pk.loser&&e.$store.state.pk.b_id===parseInt(e.$store.state.user.id)?(Object(a["v"])(),Object(a["g"])("div",Te," Lose ")):(Object(a["v"])(),Object(a["g"])("div",qe," Win ")),Object(a["h"])("div",Ge,[Object(a["h"])("button",{onClick:t[0]||(t[0]=(...e)=>c.restart&&c.restart(...e)),type:"button",class:"btn btn-primary btn-lg"}," 再来！ ")])])}var Ve={setup(){const e=Object(C["b"])(),t=()=>{e.commit("updateStatus","matching"),e.commit("updateLoser","none"),e.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"})};return{restart:t}}};s("a2e6");const Ke=F()(Ve,[["render",Ue],["__scopeId","data-v-0d70f8b2"]]);var Ee=Ke,Re={components:{PlayGround:Fe,MatchGround:je,ResultBorad:Ee},setup(){const e=Object(C["b"])(),t=`wss://snake.zinzin.cc/websocket/${e.state.user.token}/`;e.commit("updateLoser","none"),e.commit("updateIsRecord",!1);let s=null;Object(a["t"])(()=>{e.commit("updateOpponent",{username:"我的对手",photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),s=new WebSocket(t),s.onopen=()=>{console.log("connected!"),e.commit("updateSocket",s)},s.onmessage=t=>{const s=JSON.parse(t.data);if("start-matching"===s.event)e.commit("updateOpponent",{username:s.opponent_username,photo:s.opponent_photo}),setTimeout(()=>{e.commit("updateStatus","playing")},200),e.commit("updateGamemap",s.game);else if("move"===s.event){const t=e.state.pk.gameObject,[a,c]=t.snakes;a.set_direction(s.a_direction),c.set_direction(s.b_direction)}else if("result"===s.event){const t=e.state.pk.gameObject,[a,c]=t.snakes;"all"!==s.loser&&"A"!==s.loser||(a.status="die"),"all"!==s.loser&&"B"!==s.loser||(c.status="die"),e.commit("updateLoser",s.loser)}},s.onclose=()=>{console.log("disconnected!")}}),Object(a["u"])(()=>{s.close(),e.commit("updateStatus","matching")})}};s("6eb7");const Ne=F()(Re,[["render",K],["__scopeId","data-v-1122ad4d"]]);var Je=Ne;const We=e=>(Object(a["y"])("data-v-20725e8e"),e=e(),Object(a["w"])(),e),He={class:"table table-striped table-hover",style:{"text-align":"center"}},Qe=We(()=>Object(a["h"])("thead",null,[Object(a["h"])("th",null,"玩家"),Object(a["h"])("th",null,"天梯积分")],-1)),Xe=["src"],Ye=Object(a["i"])("   "),Ze={class:"record-user-username"},et={"aria-label":"...",style:{float:"right"}},tt={class:"pagination"},st=We(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"前一页",-1)),at=[st],ct=["onClick"],ot={class:"page-link",href:"#"},nt=We(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"后一页",-1)),rt=[nt];function lt(e,t,s,c,o,n){const r=Object(a["D"])("ContentField");return Object(a["v"])(),Object(a["e"])(r,null,{default:Object(a["K"])(()=>[Object(a["h"])("table",He,[Qe,Object(a["h"])("tbody",null,[(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.users,e=>(Object(a["v"])(),Object(a["g"])("tr",{key:e.id,style:{"text-align":"center"}},[Object(a["h"])("td",null,[Object(a["h"])("img",{src:e.photo,alt:"",class:"record-user-photo"},null,8,Xe),Ye,Object(a["h"])("span",Ze,Object(a["F"])(e.username),1)]),Object(a["h"])("td",null,Object(a["F"])(e.rating),1)]))),128))])]),Object(a["h"])("nav",et,[Object(a["h"])("ul",tt,[Object(a["h"])("li",{class:"page-item",onClick:t[0]||(t[0]=e=>c.click_page(-2))},at),(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.pages,e=>(Object(a["v"])(),Object(a["g"])("li",{class:Object(a["q"])("page-item "+e.is_active),key:e.number,onClick:t=>c.click_page(e.number)},[Object(a["h"])("a",ot,Object(a["F"])(e.number),1)],10,ct))),128)),Object(a["h"])("li",{class:"page-item",onClick:t[1]||(t[1]=e=>c.click_page(-1))},rt)])])]),_:1})}const it={class:"container content-field"},dt={class:"card"},bt={class:"card-body"};function ut(e,t){return Object(a["v"])(),Object(a["g"])("div",it,[Object(a["h"])("div",dt,[Object(a["h"])("div",bt,[Object(a["C"])(e.$slots,"default",{},void 0,!0)])])])}s("6f13");const pt={},ht=F()(pt,[["render",ut],["__scopeId","data-v-325119d3"]]);var jt=ht,Ot={components:{ContentField:jt},setup(){const e=Object(C["b"])();let t=Object(a["A"])([]),s=1,c=Object(a["A"])([]),o=0;const n=e=>{-2===e?e=s-1:-1===e&&(e=s+1);let t=parseInt(Math.ceil(o/10));e>=1&&e<=t&&l(e)},r=()=>{let e=parseInt(Math.ceil(o/10)),t=[];for(let a=s-2;a<=s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});c.value=t},l=a=>{s=a,le.a.ajax({url:"https://snake.zinzin.cc/api/ranklist/getlist/",data:{page:a},type:"GET",headers:{Authorization:"Bearer "+e.state.user.token},success(e){t.value=e.users,o=e.users_count,r()},error(e){console.log(e)}})};return l(s),{users:t,pages:c,click_page:n}}};s("1b84");const mt=F()(Ot,[["render",lt],["__scopeId","data-v-20725e8e"]]);var gt=mt;const vt=e=>(Object(a["y"])("data-v-5e73173c"),e=e(),Object(a["w"])(),e),_t={class:"table table-striped table-hover",style:{"text-align":"center"}},ft=vt(()=>Object(a["h"])("thead",null,[Object(a["h"])("th",null,"A"),Object(a["h"])("th",null,"B"),Object(a["h"])("th",null,"对战结果"),Object(a["h"])("th",null,"对战时间"),Object(a["h"])("th",null,"操作")],-1)),yt=["src"],kt=Object(a["i"])("   "),wt={class:"record-user-username"},xt=["src"],At=Object(a["i"])("   "),It={class:"record-user-username"},zt=["onClick"],St={"aria-label":"...",style:{float:"right"}},Bt={class:"pagination"},Ct=vt(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"前一页",-1)),Lt=[Ct],Pt=["onClick"],Ft={class:"page-link",href:"#"},Mt=vt(()=>Object(a["h"])("a",{class:"page-link",href:"#"},"后一页",-1)),$t=[Mt];function Dt(e,t,s,c,o,n){const r=Object(a["D"])("ContentField");return Object(a["v"])(),Object(a["e"])(r,null,{default:Object(a["K"])(()=>[Object(a["h"])("table",_t,[ft,Object(a["h"])("tbody",null,[(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.records,e=>(Object(a["v"])(),Object(a["g"])("tr",{key:e.record.id,style:{"text-align":"center"}},[Object(a["h"])("td",null,[Object(a["h"])("img",{src:e.a_photo,alt:"",class:"record-user-photo"},null,8,yt),kt,Object(a["h"])("span",wt,Object(a["F"])(e.a_username),1)]),Object(a["h"])("td",null,[Object(a["h"])("img",{src:e.b_photo,alt:"",class:"record-user-photo"},null,8,xt),At,Object(a["h"])("span",It,Object(a["F"])(e.b_username),1)]),Object(a["h"])("td",null,Object(a["F"])(e.result),1),Object(a["h"])("td",null,Object(a["F"])(e.record.createtime),1),Object(a["h"])("td",null,[Object(a["h"])("button",{onClick:t=>c.open_record_content(e.record.id),type:"button",class:"btn btn-secondary"},"查询录像",8,zt)])]))),128))])]),Object(a["h"])("nav",St,[Object(a["h"])("ul",Bt,[Object(a["h"])("li",{class:"page-item",onClick:t[0]||(t[0]=e=>c.click_page(-2))},Lt),(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.pages,e=>(Object(a["v"])(),Object(a["g"])("li",{class:Object(a["q"])("page-item "+e.is_active),key:e.number,onClick:t=>c.click_page(e.number)},[Object(a["h"])("a",Ft,Object(a["F"])(e.number),1)],10,Pt))),128)),Object(a["h"])("li",{class:"page-item",onClick:t[1]||(t[1]=e=>c.click_page(-1))},$t)])])]),_:1})}var Tt={components:{ContentField:jt},setup(){const e=Object(C["b"])();let t=Object(a["A"])([]),s=1,c=0,o=Object(a["A"])([]);const n=e=>{-2===e?e=s-1:-1===e&&(e=s+1);let t=parseInt(Math.ceil(c/10));e>=1&&e<=t&&l(e)},r=()=>{let e=parseInt(Math.ceil(c/10)),t=[];for(let a=s-2;a<=s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});o.value=t},l=a=>{s=a,le.a.ajax({url:"https://snake.zinzin.cc/api/record/getlist/",data:{page:a},type:"GET",headers:{Authorization:"Bearer "+e.state.user.token},success(e){t.value=e.records,c=e.records_count,r()},error(e){console.log(e)}})};l(s);const i=e=>{let t=[];for(let s=0,a=0;s<13;s++){let s=[];for(let t=0;t<14;t++,a++)"0"===e[a]?s.push(0):s.push(1);t.push(s)}return t},d=s=>{for(const a of t.value)if(a.record.id===s){e.commit("updateIsRecord",!0),console.log(a),e.commit("updateGamemap",{map:i(a.record.map),a_id:a.record.aid,a_sx:a.record.asx,a_sy:a.record.asy,b_id:a.record.bid,b_sx:a.record.bsx,b_sy:a.record.bsy}),e.commit("updateSteps",{a_steps:a.record.asteps,b_steps:a.record.bsteps}),e.commit("updateRecordLoser",a.record.loser),Da.push({name:"record_content",params:{recordId:s}});break}};return{records:t,open_record_content:d,pages:o,click_page:n}}};s("9614");const qt=F()(Tt,[["render",Dt],["__scopeId","data-v-5e73173c"]]);var Gt=qt;function Ut(e,t,s,c,o,n){const r=Object(a["D"])("PlayGround");return Object(a["v"])(),Object(a["e"])(r)}var Vt={components:{PlayGround:Fe},setup(){}};const Kt=F()(Vt,[["render",Ut]]);var Et=Kt;const Rt=e=>(Object(a["y"])("data-v-3d2f06f5"),e=e(),Object(a["w"])(),e),Nt={class:"container"},Jt={class:"row"},Wt={class:"col-3"},Ht={class:"card",style:{"margin-top":"25px"}},Qt={class:"card-body"},Xt={class:"img1",for:"file"},Yt=["src"],Zt=Rt(()=>Object(a["h"])("hr",null,null,-1)),es={class:"col-9"},ts={class:"card",style:{"margin-top":"25px"}},ss={class:"card-header"},as=Rt(()=>Object(a["h"])("span",{style:{"font-size":"130%"}},"我的Bot",-1)),cs=Rt(()=>Object(a["h"])("button",{type:"button",class:"btn btn-outline-primary float-end","data-bs-toggle":"modal","data-bs-target":"#add-bot-btn"}," 创建Bot ",-1)),os={class:"modal fade",id:"add-bot-btn",tabindex:"-1"},ns={class:"modal-dialog modal-xl"},rs={class:"modal-content"},ls=Rt(()=>Object(a["h"])("div",{class:"modal-header"},[Object(a["h"])("h5",{class:"modal-title",id:"exampleModalLbale1"},"创建Bot"),Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),is={class:"modal-body"},ds={class:"mb-3"},bs=Rt(()=>Object(a["h"])("label",{for:"add-bot-title",class:"form-label"},"名称",-1)),us={class:"mb-3"},ps=Rt(()=>Object(a["h"])("label",{for:"add-bot-description",class:"form-label"},"简介",-1)),hs={class:"mb-3"},js=Rt(()=>Object(a["h"])("label",{for:"add-bot-code",class:"form-label"},"代码",-1)),Os={class:"modal-footer"},ms={class:"error_message"},gs=Rt(()=>Object(a["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),vs={class:"card-body"},_s={class:"table table-striped table-hover"},fs=Rt(()=>Object(a["h"])("thead",null,[Object(a["h"])("th",null,"Bot名称"),Object(a["h"])("th",null,"创建时间"),Object(a["h"])("th",null,"操作")],-1)),ys=["data-bs-target"],ks=["onClick"],ws=["id"],xs={class:"modal-dialog modal-xl"},As={class:"modal-content"},Is=Rt(()=>Object(a["h"])("div",{class:"modal-header"},[Object(a["h"])("h5",{class:"modal-title"},"修改Bot"),Object(a["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),zs={class:"modal-body"},Ss={class:"mb-3"},Bs=Rt(()=>Object(a["h"])("label",{for:"add-bot-title",class:"form-label"},"名称",-1)),Cs=["onUpdate:modelValue"],Ls={class:"mb-3"},Ps=Rt(()=>Object(a["h"])("label",{for:"add-bot-description",class:"form-label"},"简介",-1)),Fs=["onUpdate:modelValue"],Ms={class:"mb-3"},$s=Rt(()=>Object(a["h"])("label",{for:"add-bot-code",class:"form-label"},"代码",-1)),Ds={class:"modal-footer"},Ts={class:"error_message"},qs=Rt(()=>Object(a["h"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),Gs=["onClick"];function Us(e,t,s,c,o,n){const r=Object(a["D"])("VAceEditor");return Object(a["v"])(),Object(a["g"])("div",Nt,[Object(a["h"])("div",Jt,[Object(a["h"])("div",Wt,[Object(a["h"])("div",Ht,[Object(a["h"])("div",Qt,[Object(a["h"])("label",Xt,[Object(a["h"])("input",{type:"file",style:{display:"none"},class:"form-control",id:"file",onClick:t[0]||(t[0]=e=>c.upload_photo())}),Object(a["h"])("img",{src:e.$store.state.user.photo,alt:"",style:{width:"100%"}},null,8,Yt)]),Zt,Object(a["h"])("button",{style:{display:"flex","justify-content":"center",width:"100%"},id:"upload",class:"btn btn-light",type:"button",onClick:t[1]||(t[1]=e=>c.upload_photo())},"点击头像更新")])])]),Object(a["h"])("div",es,[Object(a["h"])("div",ts,[Object(a["h"])("div",ss,[as,cs,Object(a["h"])("div",os,[Object(a["h"])("div",ns,[Object(a["h"])("div",rs,[ls,Object(a["h"])("div",is,[Object(a["h"])("form",null,[Object(a["h"])("div",ds,[bs,Object(a["L"])(Object(a["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>c.botadd.title=e),type:"text",class:"form-control",id:"add-bot-title",placeholder:"请输入Bot名称"},null,512),[[a["I"],c.botadd.title]])]),Object(a["h"])("div",us,[ps,Object(a["L"])(Object(a["h"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>c.botadd.description=e),class:"form-control",id:"add-bot-description",rows:"3",placeholder:"请输入Bot简介"},null,512),[[a["I"],c.botadd.description]])]),Object(a["h"])("div",hs,[js,Object(a["j"])(r,{value:c.botadd.content,"onUpdate:value":t[4]||(t[4]=e=>c.botadd.content=e),onInit:c.editorInit,lang:"c_cpp",options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,fontSize:14,tabSize:4,showPrintMargin:!1,highlightActiveLine:!0},theme:"twilight",style:{height:"400px"}},null,8,["value","onInit"])])])]),Object(a["h"])("div",Os,[Object(a["h"])("div",ms,Object(a["F"])(c.botadd.error_message),1),gs,Object(a["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>c.add_bot&&c.add_bot(...e))},"创建")])])])])]),Object(a["h"])("div",vs,[Object(a["h"])("table",_s,[fs,Object(a["h"])("tbody",null,[(Object(a["v"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.bots,e=>(Object(a["v"])(),Object(a["g"])("tr",{key:e.id},[Object(a["h"])("td",null,Object(a["F"])(e.title),1),Object(a["h"])("td",null,Object(a["F"])(e.createtime),1),Object(a["h"])("td",null,[Object(a["h"])("button",{type:"button",class:"btn btn-secondary",style:{"margin-right":"10px"},"data-bs-toggle":"modal","data-bs-target":"#update-bot-modal-"+e.id},"修改",8,ys),Object(a["h"])("button",{type:"button",class:"btn btn-danger",onClick:t=>c.remove_bot(e)},"删除",8,ks),Object(a["h"])("div",{class:"modal fade",id:"update-bot-modal-"+e.id,tabindex:"-1"},[Object(a["h"])("div",xs,[Object(a["h"])("div",As,[Is,Object(a["h"])("div",zs,[Object(a["h"])("form",null,[Object(a["h"])("div",Ss,[Bs,Object(a["L"])(Object(a["h"])("input",{"onUpdate:modelValue":t=>e.title=t,type:"text",class:"form-control",id:"add-bot-title",placeholder:"请输入Bot名称"},null,8,Cs),[[a["I"],e.title]])]),Object(a["h"])("div",Ls,[Ps,Object(a["L"])(Object(a["h"])("textarea",{"onUpdate:modelValue":t=>e.description=t,class:"form-control",id:"add-bot-description",rows:"3",placeholder:"请输入Bot简介"},null,8,Fs),[[a["I"],e.description]])]),Object(a["h"])("div",Ms,[$s,Object(a["j"])(r,{value:e.content,"onUpdate:value":t=>e.content=t,onInit:c.editorInit,lang:"c_cpp",options:{enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,fontSize:14,tabSize:4,showPrintMargin:!1,highlightActiveLine:!0},theme:"twilight",style:{height:"400px"}},null,8,["value","onUpdate:value","onInit"])])])]),Object(a["h"])("div",Ds,[Object(a["h"])("div",Ts,Object(a["F"])(e.error_message),1),qs,Object(a["h"])("button",{type:"button",class:"btn btn-primary",onClick:t=>c.update_bot(e)},"保存修改",8,Gs)])])])],8,ws)])]))),128))])])])])])])])}var Vs=s("f41e"),Ks=s("6d4f"),Es=s.n(Ks),Rs={components:{VAceEditor:Vs["a"]},setup(){function e(){s("da79"),s("2d79"),s("69f0"),s("53d7"),s("02c9"),s("b401"),s("b3a6"),s("817b"),s("1f02"),s("9222"),s("c498"),s("e219"),s("e33d"),s("4207")}Es.a.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@"+s("6d4f").version+"/src-noconflict/");const t=Object(C["b"])();let c=Object(a["A"])([]);const o=Object(a["z"])({title:"",description:"",content:"",error_message:""}),n=()=>{le.a.ajax({url:"https://snake.zinzin.cc/api/user/bot/getlist/",type:"GET",headers:{Authorization:"Bearer "+t.state.user.token},success(e){console.log(e),c.value=e}})},r=e=>{le.a.ajax({url:"https://snake.zinzin.cc/api/user/bot/remove/",type:"POST",headers:{Authorization:"Bearer "+t.state.user.token},data:{bot_id:e.id},success(e){"success"===e.error_message&&n()}})},l=e=>{o.error_message="",le.a.ajax({url:"https://snake.zinzin.cc/api/user/bot/update/",type:"POST",data:{bot_id:e.id,title:e.title,description:e.title,content:e.content},headers:{Authorization:"Bearer "+t.state.user.token},success(t){"success"===t.error_message?(D["Modal"].getInstance("#update-bot-modal-"+e.id).hide(),n()):o.error_message=t.error_message},error(e){console.log(e)}})},i=()=>{o.error_message="",le.a.ajax({url:"https://snake.zinzin.cc/api/user/bot/add/",type:"POST",data:{title:o.title,description:o.title,content:o.content},headers:{Authorization:"Bearer "+t.state.user.token},success(e){"success"===e.error_message?(o.title="",o.description="",o.content="",o.error_message="",D["Modal"].getInstance("#add-bot-btn").hide(),n()):o.error_message=e.error_message}})},d=()=>{var e=new FormData;e.append("file",le()("#file")[0].files[0]),le.a.ajax({url:"https://snake.zinzin.cc/api/user/account/upload_photo/",type:"POST",cache:!1,data:e,processData:!1,contentType:!1,headers:{Authorization:"Bearer "+t.state.user.token},success(e){console.log(e),t.commit("updatePhoto",e)},error(e){console.log(e)}})};return n(),{bots:c,botadd:o,add_bot:i,remove_bot:r,update_bot:l,VAceEditor:Vs["a"],editorInit:e,upload_photo:d}}};s("8dfa");const Ns=F()(Rs,[["render",Us],["__scopeId","data-v-3d2f06f5"]]);var Js=Ns;const Ws=Object(a["i"])(" 404 Not Found ");function Hs(e,t,s,c,o,n){const r=Object(a["D"])("ContentField");return Object(a["v"])(),Object(a["e"])(r,null,{default:Object(a["K"])(()=>[Ws]),_:1})}var Qs={components:{ContentField:jt}};const Xs=F()(Qs,[["render",Hs]]);var Ys=Xs;const Zs=e=>(Object(a["y"])("data-v-561f9364"),e=e(),Object(a["w"])(),e),ea={class:"row justify-content-md-center"},ta={class:"col-3"},sa={class:"mb-3"},aa=Zs(()=>Object(a["h"])("label",{for:"username",class:"form-label"},"用户名",-1)),ca={class:"mb-3"},oa=Zs(()=>Object(a["h"])("label",{for:"passowrd",class:"form-label"},"密码",-1)),na={class:"mb-3"},ra=Zs(()=>Object(a["h"])("label",{for:"confirmedPassword",class:"form-label"},"确认密码",-1)),la={class:"error_message"},ia=Zs(()=>Object(a["h"])("button",{type:"submit",class:"btn btn-primary"},"提交",-1));function da(e,t,s,c,o,n){const r=Object(a["D"])("ContentField");return Object(a["v"])(),Object(a["e"])(r,null,{default:Object(a["K"])(()=>[Object(a["h"])("div",ea,[Object(a["h"])("div",ta,[Object(a["h"])("form",{onSubmit:t[3]||(t[3]=Object(a["M"])((...e)=>c.register&&c.register(...e),["prevent"]))},[Object(a["h"])("div",sa,[aa,Object(a["L"])(Object(a["h"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.username=e),type:"text",class:"form-control",id:"username",placeholder:"请输入用户名"},null,512),[[a["I"],c.username]])]),Object(a["h"])("div",ca,[oa,Object(a["L"])(Object(a["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.password=e),type:"password",class:"form-control",id:"passoword",placeholder:"请输入密码"},null,512),[[a["I"],c.password]])]),Object(a["h"])("div",na,[ra,Object(a["L"])(Object(a["h"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>c.confirmedPassword=e),type:"password",class:"form-control",id:"confirmedPassword",placeholder:"请再次输入密码"},null,512),[[a["I"],c.confirmedPassword]])]),Object(a["h"])("div",la,Object(a["F"])(c.error_message),1),ia],32)])])]),_:1})}var ba={components:{ContentField:jt},setup(){let e=Object(a["A"])(""),t=Object(a["A"])(""),s=Object(a["A"])(""),c=Object(a["A"])("");const o=()=>{le.a.ajax({url:"https://snake.zinzin.cc/api/user/account/register/",type:"post",data:{username:e.value,password:t.value,confirmedPassword:s.value},success(e){"success"==e.error_message?Da.push({name:"user_account_login"}):c.value=e.error_message},error(e){console.log(e)}})};return{username:e,password:t,confirmedPassword:s,error_message:c,register:o}}};s("6da1");const ua=F()(ba,[["render",da],["__scopeId","data-v-561f9364"]]);var pa=ua;const ha=e=>(Object(a["y"])("data-v-5ab6126a"),e=e(),Object(a["w"])(),e),ja={class:"row justify-content-md-center"},Oa={class:"col-3"},ma={class:"mb-3"},ga=ha(()=>Object(a["h"])("label",{for:"username",class:"form-label"},"用户名",-1)),va={class:"mb-3"},_a=ha(()=>Object(a["h"])("label",{for:"passowrd",class:"form-label"},"密码",-1)),fa={class:"error_message"},ya=ha(()=>Object(a["h"])("button",{type:"submit",class:"btn btn-primary"},"提交",-1)),ka=ha(()=>Object(a["h"])("img",{width:"30",src:"https://cdn.acwing.com/media/article/image/2022/09/06/1_32f001fd2d-acwing_logo.png",alt:""},null,-1)),wa=ha(()=>Object(a["h"])("br",null,null,-1)),xa=Object(a["i"])(" AcWing一键登陆 "),Aa=[ka,wa,xa];function Ia(e,t,s,c,o,n){const r=Object(a["D"])("ContentField");return e.$store.state.user.pulling_info?Object(a["f"])("",!0):(Object(a["v"])(),Object(a["e"])(r,{key:0},{default:Object(a["K"])(()=>[Object(a["h"])("div",ja,[Object(a["h"])("div",Oa,[Object(a["h"])("form",{onSubmit:t[2]||(t[2]=Object(a["M"])((...e)=>c.login&&c.login(...e),["prevent"]))},[Object(a["h"])("div",ma,[ga,Object(a["L"])(Object(a["h"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.username=e),type:"text",class:"form-control",id:"username",placeholder:"请输入用户名"},null,512),[[a["I"],c.username]])]),Object(a["h"])("div",va,[_a,Object(a["L"])(Object(a["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.password=e),type:"password",class:"form-control",id:"passoword",placeholder:"请输入密码"},null,512),[[a["I"],c.password]])]),Object(a["h"])("div",fa,Object(a["F"])(c.error_message),1),ya],32),Object(a["h"])("div",{style:{"text-align":"center","margin-top":"20px",cursor:"pointer"},onClick:t[3]||(t[3]=(...e)=>c.acwing_login&&c.acwing_login(...e))},Aa)])])]),_:1}))}var za={components:{ContentField:jt},setup(){const e=Object(C["b"])();let t=Object(a["A"])(""),s=Object(a["A"])(""),c=Object(a["A"])("");const o=localStorage.getItem("jwt_token");o?(e.commit("updateToken",o),e.dispatch("getinfo",{success(){Da.push({name:"home"}),e.commit("updataPullinginfo",!1)},error(){e.commit("updataPullinginfo",!1)}})):e.commit("updataPullinginfo",!1);const n=()=>{c.value=" ",e.dispatch("login",{username:t.value,password:s.value,success(){e.dispatch("getinfo",{success(){Da.push({name:"home"})}})},error(){c.value="用户名或密码错误"}})},r=()=>{le.a.ajax({url:"https://app3277.acapp.acwing.com.cn/api/user/account/acwing/web/apply_code/",type:"GET",success:e=>{"success"===e.result&&window.location.replace(e.apply_code_url)}})};return{username:t,password:s,error_message:c,login:n,acwing_login:r}}};s("b6ab");const Sa=F()(za,[["render",Ia],["__scopeId","data-v-5ab6126a"]]);var Ba=Sa;function Ca(e,t,s,c,o,n){return Object(a["v"])(),Object(a["g"])("div")}var La={setup(){const e=Object(B["c"])(),t=Object(C["b"])();le.a.ajax({url:"https://app3277.acapp.acwing.com.cn/api/user/account/acwing/web/receive_code",type:"GET",data:{code:e.query.code,state:e.query.state},success:e=>{"success"===e.result?(localStorage.setItem("jwt_token",e.jwt_token),t.commit("updateToken",e.jwt_token),Da.push({name:"home"}),t.commit("updataPullinginfo",!1)):Da.push({name:"user_account_login"})}})}};const Pa=F()(La,[["render",Ca]]);var Fa=Pa;const Ma=[{path:"/",name:"home",redirect:"/pk/",meta:{requestAuth:!0}},{path:"/pk/",name:"pk_index",component:Je,meta:{requestAuth:!0}},{path:"/record/",name:"record_index",component:Gt,meta:{requestAuth:!0}},{path:"/record/:recordId/",name:"record_content",component:Et,meta:{requestAuth:!0}},{path:"/ranklist/",name:"ranklist_index",component:gt,meta:{requestAuth:!0}},{path:"/user/bot/",name:"user_bot_index",component:Js,meta:{requestAuth:!0}},{path:"/user/account/login/",name:"user_account_login",component:Ba,meta:{requestAuth:!1}},{path:"/user/account/register/",name:"user_account_register",component:pa,meta:{requestAuth:!1}},{path:"/user/account/acwing/web/receive_code/",name:"user_account_acwing_web_receive_code",component:Fa,meta:{requestAuth:!1}},{path:"/404/",name:"404",component:Ys,meta:{requestAuth:!1}},{path:"/:catchAll(.*)",redirect:"/404/"}],$a=Object(B["a"])({history:Object(B["b"])(),routes:Ma});$a.beforeEach((e,t,s)=>{e.meta.requestAuth&&!ue.state.user.is_login?s({name:"user_account_login"}):s()});var Da=$a;Object(a["d"])(G).use(ue).use(Da).mount("#app")},5726:function(e,t,s){"use strict";s("0c8f")},6330:function(e,t,s){},6867:function(e,t,s){},"6da1":function(e,t,s){"use strict";s("7761")},"6eb7":function(e,t,s){"use strict";s("9ac5")},"6f13":function(e,t,s){"use strict";s("cd9c")},7123:function(e,t,s){},7761:function(e,t,s){},"77eb":function(e,t,s){},"8dfa":function(e,t,s){"use strict";s("7123")},9614:function(e,t,s){"use strict";s("1b93")},"9ac5":function(e,t,s){},a2e6:function(e,t,s){"use strict";s("acbf")},acbf:function(e,t,s){},b594:function(e,t,s){"use strict";s("bd33")},b6ab:function(e,t,s){"use strict";s("6867")},bd33:function(e,t,s){},cd01:function(e,t,s){},cd9c:function(e,t,s){},d675:function(e,t,s){"use strict";s("6330")},d812:function(e,t,s){"use strict";s("77eb")}});
//# sourceMappingURL=app.8ade4d67.js.map